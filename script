import whisper
import os
import glob

# ğŸ” Rechercher tous les fichiers MP4 et MP3 dans le dossier courant
audio_files = glob.glob("*.mp4") + glob.glob("*.mp3")  # Liste tous les fichiers .mp4 et .mp3

if not audio_files:
    print("âŒ Aucun fichier MP4 ou MP3 trouvÃ© dans le dossier du script.")
    exit()

# ğŸš€ Charger le modÃ¨le Whisper (small pour un bon Ã©quilibre vitesse/prÃ©cision sinon tiny ou base)
model = whisper.load_model("tiny")

for audio_file in audio_files:
    print(f"ğŸµ Fichier trouvÃ© : {audio_file}")
    
    # ğŸ™ï¸ Transcrire l'audio
    print("â³ Transcription en cours...")
    result = model.transcribe(audio_file)
    
    # ğŸ“ GÃ©nÃ©rer un nom de fichier pour la transcription
    output_file = os.path.splitext(audio_file)[0] + "_transcription.txt"
    
    # ğŸ’¾ Sauvegarde de la transcription dans un fichier texte
    with open(output_file, "w", encoding="utf-8") as f:
        f.write(result["text"])
    
    print(f"âœ… Transcription terminÃ©e et enregistrÃ©e dans : {output_file}")
