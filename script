import whisper
import os
import glob

# ğŸ” Rechercher un fichier MP3 dans le dossier courant
mp3_files = glob.glob("*.mp3")  # Liste tous les fichiers .mp3

if not mp3_files:
    print("âŒ Aucun fichier MP3 trouvÃ© dans le dossier du script.")
    exit()

# ğŸ·ï¸ Prendre le premier fichier MP3 trouvÃ©
audio_file = mp3_files[0]
print(f"ğŸµ Fichier trouvÃ© : {audio_file}")

# ğŸš€ Charger le modÃ¨le Whisper (small pour un bon Ã©quilibre vitesse/prÃ©cision)
model = whisper.load_model("small")

# ğŸ™ï¸ Transcrire l'audio
print("â³ Transcription en cours...")
result = model.transcribe(audio_file)

# ğŸ“ GÃ©nÃ©rer un nom de fichier pour la transcription
output_file = os.path.splitext(audio_file)[0] + "_transcription.txt"

# ğŸ’¾ Sauvegarde de la transcription dans un fichier texte
with open(output_file, "w", encoding="utf-8") as f:
    f.write(result["text"])

print(f"âœ… Transcription terminÃ©e et enregistrÃ©e dans : {output_file}")
